# dlm

電気係貸出管理ソフトウェアです。

Rustによって実装されています。


# インストール方法


## リリースから実行ファイルを手に入れ、パスの通っている場所に配置する場合

現時点での最新番は0.1.0です。
[GitHub上でリリースされている](https://github.com/puripuri2100/dlm/releases/tag/0.1.0)ので、ここからzipファイルをダウンロードして展開し、中にある実行ファイルを適切な場所に配置してください。

作成した実行ファイルは「64bit版Windows10用」と「Ubuntu20.04LTS用」です。「Ubuntu20.04LTS用」はWSL2上にインストールしたUbuntu20.04LTSで作成しました。

zipファイルへのリンクは以下の通りです。クリックすると自動的にダウンロードが始まります。

- [64bit版Windows10用](https://github.com/puripuri2100/dlm/releases/download/0.1.0/windows10-64bit-2020-11-23.zip)
- [Ubuntu20.04LTS用](https://github.com/puripuri2100/dlm/releases/download/0.1.0/wsl2+ubuntu20.04LTS-2020-11-23.zip)


## Rust, Cargoの環境構築が済んでいる場合

```
cargo install --git "https://github.com/puripuri2100/dlm.git"
```

によってインストールすることができます。


## Rust, Cargoの環境構築からしたい方


[Rust公式ホームページのインストールについてのページ](https://www.rust-lang.org/ja/tools/install)を見てインストールしてください。

**2020/11/23時点ではWindows利用者はVisual Studio C++ Build toolsをインストールする必要があります。**


環境構築が済んだら上記のコマンドでインストールできます。



# 起動方法

`dlm <CSV file name> --config <JSON file name>`によって起動できます。
`--config`オプションは省略できます。

与えたCSVファイルにデータを書き込んでいくため、空のファイルもしくは存在しないファイルへのパスを指定してください

貸し出す品名や貸出先の団体の指定は基本的に数字などで行いますが、それに正式名称等を対応させたい場合に使うのが、`--config`オプションで与えたJSONファイルです。
`"sizai"`タグに

```
"sizai" : {
  "0001" : "内リール1",
  "0101": "外リール1"
}
```

のように`"<略称>" : "<正式名称>"`を連ねて与えます。

団体名の方は`"sandan"`タグに対して同じようにデータを与えます。


# 使いかた


起動すると中で対話環境が開かれます。
詳しくは`help`コマンドを打ち込んで使ってみて欲しいです。
一応helpメッセージを貼り付けておきます。


```
このソフトウェア上で使うことのできるコマンドとその役割は以下の通りです。

  help      : 入力できる内容と役割（これです）を表示します

  exit      : 終了します

  lend      : 'lend <貸出品の番号> <貸出先の番号>' で貸出を登録します
              <貸出先の番号>は省略可能です

  l         : 'lend' の省略形です
              使い方は'lend'と変わりません

  return    : 'return <返却品の番号> <返却元の番号>' で返却を登録します
              <返却元の番号>は省略可能です

  r         : 'return' の省略形です
              使い方は'return'と変わりません

  edit      : 'edit <編集対象に付けられた通し番号> <編集後の品名の番号> <編集後の貸出先の番号>'
              で以前に行った操作を改変できます
              <編集後の貸出先の番号>は省略可能です
              'remove'と'edit'で行った操作を編集することは出来ません

  remove    : 'remove <編集対象に付けられた通し番号>'
              で以前に行った操作を無かったことにできます

  show      : 現在貸し出されているものと貸出先を表示します
              品名と貸出先の番号は実行時に与えたJSONファイルに基づいて変換されます

  all       : 全ての操作を表示します

  check     : 貸出と返却が食い違っているものが無いかをチェックします

  history   : 'history' 単体では直近10件の入力を表示します
              'history <n>' と、数字を与えるとその分だけ直近の入力を表示します
```

---

(c) 2020 Naoki Kaneko (a.k.a. "puripuri2100")
